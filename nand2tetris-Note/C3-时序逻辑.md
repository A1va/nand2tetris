# [时序逻辑]

### [背景知识]

**时钟(Clock)**: 计算机里时间的流逝是用主时针(master clock)来表示的，它提供连续的**交变信号序列**。硬件实现通常基于**振荡器(oscillator)**，其在两个信号值**0-1**，或称**“低电平-高电平(low-high, tick-tock)”**之间交替变化。两个相邻的上升沿之间的时间间隙称为时钟的**周期(cycle)**，每个时钟周期模塑一个**离散的时间单元**。通过硬件电路，这个信号同时被传送到计算机平台的每个时序芯片中。



**触发器(Flip-Flops)**: 本书使用**数据触发器(Data Flip-Flop, DFF或称D触发器)**。实现基于时间的行为：
$$
out(t) = in(t - 1)
$$
t是当前时钟周期。换而言之，DFF能够简单的实现将前一个时间周期的输入值作为当前周期的输出值。

`out(t) = in(t - 1)`是所有计算机硬件维持自身状态的基础，二进制单元 -> 寄存器 -> 任意大的随机存取记忆单元(RAM) 都是如此.



**寄存器(Registers)**: 能够“储存”某一时刻的值，实现经典的存储行为：
$$
out(t) = out(t - 1)
$$
从另一个方面来说，DFF仅能够输出它前一时钟周期的输出，也就是`out(t) = in(t - 1)`。这提示了我们，可以通过DFF来实现寄存器，只需将后面的输出反馈到它的输入就可以了。

<img src="C3-时序逻辑.assets/image-20200818162126362.png" alt="image-20200818162126362" style="zoom:80%;" />

如此一来，在任何时刻`t`，这个设备的输出都会重现它在时刻`t-1`的值。

如图3.1右，

```html
load = 1, out(t) = in(t-1),  相当于wirte操作, 希望开始存储新值, 把值置于in输入口;
load = 0, out(t) = out(t-1), 相当于read操作, 希望一直存储它的内部值直到新的指令到来
```

<img src="C3-时序逻辑.assets/image-20200818163142204.png" alt="image-20200818163142204" style="zoom:80%;" />



**内存(Memories)**: …… 随机存取内存(RAM, Random Acess Memory): 在RAM上能够随机访问被选择的字而不会受限于访问顺序。

<img src="C3-时序逻辑.assets/image-20200818163246416.png" alt="image-20200818163246416" style="zoom:80%;" />

**计数器(Counter)**: 每经过一个时间周期计数器就增加1个单位，执行函数`out(t) = out(t-1) + c`，这里`c`就是1.



### [时间问题]

至此本章介绍的芯片都是时序芯片(sequential chip)。简单来说，时序芯片就是直接或间接地嵌入一个或多个DFF门的芯片。

反馈回路：输出依赖于输入，而输入本身有依赖于输出，因此输出只依赖自身。

<img src="C3-时序逻辑.assets/image-20200818171444271.png" alt="image-20200818171444271" style="zoom:80%;" />

……………………….



### [规范详述]

- D触发器(DFFs)

- 寄存器 (基于DFFs)

- 存储块 (基于寄存器)

- 计数器芯片 (基于寄存器)